# Product Context

## プロジェクト概要

**go-webdb-template** - Go + Next.js + Database Sharding対応のサンプルプロジェクト

大規模プロジェクト向けの構成を採用した、データベースシャーディング対応のWebアプリケーションテンプレートです。

## ビジネス目標

### 主要目的

1. **スケーラビリティの実証**: データベースシャーディングによる水平スケーリングの実装例を提供
2. **ベストプラクティスの提示**: レイヤードアーキテクチャ、テスト戦略、環境別設定管理の実装例
3. **学習リソース**: 大規模アプリケーション開発の参考となる実装パターン

### 対象ユーザー

- 大規模Webアプリケーション開発を学ぶ開発者
- データベースシャーディングを実装する必要があるプロジェクト
- Go + Next.js スタックでの開発パターンを探しているチーム

## 機能要件

### コア機能

1. **ユーザー管理**
   - ユーザーの作成、取得、更新、削除
   - 全ユーザー一覧の取得（クロスシャードクエリ）

2. **投稿管理**
   - 投稿の作成、取得、更新、削除
   - ユーザーIDに基づく投稿の取得
   - 全投稿一覧の取得（クロスシャードクエリ）

3. **クロスシャードJOIN**
   - ユーザーと投稿のJOIN結果取得
   - アプリケーションレベルでのJOIN実装

### 非機能要件

1. **スケーラビリティ**: 複数データベースへの水平分割対応
2. **保守性**: レイヤー分離による明確な責務分離
3. **型安全性**: TypeScriptによる型定義
4. **テストカバレッジ**: ユニット/統合/E2Eテストで80%以上のカバレッジ目標
5. **環境分離**: develop/staging/production環境での設定切り替え

## 制約事項

1. **データベース**: 開発環境はSQLite、本番想定はPostgreSQL/MySQL
2. **シャーディング戦略**: Hash-based sharding（将来的にConsistent Hashingも検討可能）
3. **トランザクション**: 単一シャード内でのみサポート（分散トランザクションは非対応）
4. **認証・認可**: 現時点では未実装（将来の拡張項目）

## 実装済み機能

以下の機能は既に実装済みです：

- **ジョブキュー**: Redis + Asynqを使用したバックグラウンドジョブ処理システム
- **メール送信**: 標準出力、Mailpit、AWS SES対応のメール送信機能
- **レート制限**: Redis Clusterを使用したAPIレート制限機能
- **データベース再接続**: データベース接続の自動再接続機能
- **Redis再接続**: Redis接続の遅延接続・自動再接続機能

## 将来の拡張項目（現時点では未実装）

以下の機能は将来の拡張として検討されていますが、現時点では実装対象外です：

- 認証・認可（JWT-based auth）
- サービスディスカバリ
- APIバージョニング
- GraphQL
- WebSocket（リアルタイム更新）
- ページネーション
- フィルタリング・ソート

## 成功基準

1. **機能性**: 全APIエンドポイントが正常に動作
2. **パフォーマンス**: クロスシャードクエリが並列実行される
3. **テストカバレッジ**: 80%以上のカバレッジ達成
4. **ドキュメント**: アーキテクチャ、API、シャーディング戦略の完全なドキュメント化
5. **保守性**: レイヤー分離による明確な責務分離の実現

