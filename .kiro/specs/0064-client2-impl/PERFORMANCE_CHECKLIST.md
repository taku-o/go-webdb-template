# パフォーマンス確認チェックリスト

## タスク6.2: パフォーマンス確認

### 自動確認済み項目

- [x] ビルドが成功する（`npm run build`）
- [x] バンドルサイズが適切である（ビルド結果から確認）

### ビルド結果（バンドルサイズ）

```
Route (app)                              Size     First Load JS
┌ ƒ /                                    4.98 kB         207 kB
├ ƒ /_not-found                          896 B          87.1 kB
├ ƒ /api/auth/[...nextauth]              0 B                0 B
├ ƒ /api/auth/profile                    0 B                0 B
├ ƒ /api/auth/token                      0 B                0 B
├ ƒ /dm_email/send                       2.99 kB         208 kB
├ ƒ /dm_movie/upload                     53.5 kB         256 kB
├ ƒ /dm-jobqueue                         3.05 kB         208 kB
├ ƒ /dm-posts                            29.6 kB         235 kB
├ ƒ /dm-user-posts                       4.61 kB         207 kB
├ ƒ /dm-users                            4.37 kB         210 kB
├ ƒ /opengraph-image                     0 B                0 B
└ ○ /sitemap                             0 B                0 B
+ First Load JS shared by all            86.3 kB
```

### 手動確認が必要な項目

#### 1. ページ読み込み速度の確認

##### トップページ (`/`)
- [ ] 初回読み込み時間が3秒以内
- [ ] インタラクティブになるまでの時間が適切
- [ ] 画像やリソースの読み込みが適切

##### ユーザー管理ページ (`/dm-users`)
- [ ] ページ読み込み時間が適切
- [ ] ユーザー一覧の表示が速い
- [ ] API呼び出しのレスポンス時間が適切

##### 投稿管理ページ (`/dm-posts`)
- [ ] ページ読み込み時間が適切
- [ ] 投稿一覧の表示が速い
- [ ] ユーザー選択の読み込みが速い

##### ユーザーと投稿のJOINページ (`/dm-user-posts`)
- [ ] ページ読み込み時間が適切
- [ ] クロスシャードクエリのレスポンス時間が適切
- [ ] 大量データの表示が適切

##### メール送信ページ (`/dm_email/send`)
- [ ] ページ読み込み時間が適切
- [ ] フォームの表示が速い

##### ジョブキューページ (`/dm-jobqueue`)
- [ ] ページ読み込み時間が適切
- [ ] フォームの表示が速い

##### 動画アップロードページ (`/dm_movie/upload`)
- [ ] ページ読み込み時間が適切
- [ ] Uppyダッシュボードの読み込みが速い
- [ ] 動画アップロードの進捗表示が適切

#### 2. API呼び出しのレスポンス時間の確認

- [ ] ユーザー一覧取得APIのレスポンス時間が適切
- [ ] ユーザー作成APIのレスポンス時間が適切
- [ ] 投稿一覧取得APIのレスポンス時間が適切
- [ ] 投稿作成APIのレスポンス時間が適切
- [ ] クロスシャードクエリAPIのレスポンス時間が適切
- [ ] CSVダウンロードAPIのレスポンス時間が適切
- [ ] メール送信APIのレスポンス時間が適切
- [ ] ジョブ登録APIのレスポンス時間が適切
- [ ] 動画アップロードAPIのレスポンス時間が適切

#### 3. 最適化の確認（必要に応じて）

- [ ] 不要なリソースの読み込みがない
- [ ] 画像の最適化が適切（該当する場合）
- [ ] コード分割が適切に機能している
- [ ] キャッシュが適切に機能している

## 確認方法

### 1. ブラウザの開発者ツールを使用

1. Chrome DevToolsを開く（F12）
2. Networkタブで各ページの読み込み時間を確認
3. Performanceタブでパフォーマンスを分析

### 2. Lighthouseを使用

```bash
# Chrome DevToolsのLighthouseタブを使用
# または、CLIツールを使用
npx lighthouse http://localhost:3000 --view
```

### 3. Next.jsのビルド分析

```bash
cd client2
npm run build
# ビルド結果からバンドルサイズを確認
```

## 注意事項

- 要件定義書のルールに従い、最適化は必要最小限に留める
- パフォーマンスの問題が発見された場合、必要に応じて最適化を実施
- 最適化は機能を損なわない範囲で実施する

## 参考値

- 初回読み込み時間: 3秒以内が目安
- First Load JS: 300KB以下が目安（現在は最大256KBで適切）
- APIレスポンス時間: 1秒以内が目安（ネットワーク状況による）
