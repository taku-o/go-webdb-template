server:
  port: 8080
  read_timeout: 30s
  write_timeout: 30s

admin:
  port: 8081
  read_timeout: 30s
  write_timeout: 30s
  auth:
    username: ${ADMIN_USERNAME}
    password: ${ADMIN_PASSWORD}
  session:
    lifetime: 7200

database:
  shards:
    - id: 1
      driver: postgres
      host: staging-db-shard1.example.com
      port: 5432
      name: app_db_shard1
      user: staging_user
      password: ${DB_PASSWORD_SHARD1}  # 環境変数から読み込み
      writer_dsn: host=staging-db-shard1-writer.example.com port=5432 user=staging_user password=${DB_PASSWORD_SHARD1} dbname=app_db_shard1 sslmode=require
      reader_dsns:
        - host=staging-db-shard1-reader1.example.com port=5432 user=staging_user password=${DB_PASSWORD_SHARD1} dbname=app_db_shard1 sslmode=require
      reader_policy: random
      max_connections: 25
      max_idle_connections: 10
      connection_max_lifetime: 600s
    - id: 2
      driver: postgres
      host: staging-db-shard2.example.com
      port: 5432
      name: app_db_shard2
      user: staging_user
      password: ${DB_PASSWORD_SHARD2}  # 環境変数から読み込み
      writer_dsn: host=staging-db-shard2-writer.example.com port=5432 user=staging_user password=${DB_PASSWORD_SHARD2} dbname=app_db_shard2 sslmode=require
      reader_dsns:
        - host=staging-db-shard2-reader1.example.com port=5432 user=staging_user password=${DB_PASSWORD_SHARD2} dbname=app_db_shard2 sslmode=require
      reader_policy: random
      max_connections: 25
      max_idle_connections: 10
      connection_max_lifetime: 600s

logging:
  level: info
  format: json
  output: stdout

cors:
  allowed_origins:
    - https://staging.example.com
  allowed_methods:
    - GET
    - POST
    - PUT
    - DELETE
    - OPTIONS
  allowed_headers:
    - Content-Type
    - Authorization
