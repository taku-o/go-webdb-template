# SQLite設定（開発環境用）
database:
  groups:
    master:
      - id: 1
        driver: sqlite3
        dsn: ./data/master.db
        writer_dsn: ./data/master.db
        reader_dsns:
          - ./data/master.db
        reader_policy: random
        max_connections: 10
        max_idle_connections: 5
        connection_max_lifetime: 300s

    sharding:
      databases:
        - id: 1
          driver: sqlite3
          dsn: ./data/sharding_db_1.db
          table_range: [0, 7]
        - id: 2
          driver: sqlite3
          dsn: ./data/sharding_db_2.db
          table_range: [8, 15]
        - id: 3
          driver: sqlite3
          dsn: ./data/sharding_db_3.db
          table_range: [16, 23]
        - id: 4
          driver: sqlite3
          dsn: ./data/sharding_db_4.db
          table_range: [24, 31]

      tables:
        - name: dm_users
          suffix_count: 32
        - name: dm_posts
          suffix_count: 32

# ============================================================================
# PostgreSQL設定（動作確認用）
# PostgreSQLの起動: ./scripts/start-postgres.sh start
# ============================================================================
# database:
#   groups:
#     master:
#       - id: 1
#         driver: postgres
#         host: localhost
#         port: 5432
#         user: webdb
#         password: webdb
#         name: webdb
#         max_connections: 25
#         max_idle_connections: 5
#         connection_max_lifetime: 1h
#
#     sharding:
#       databases:
#         - id: 1
#           driver: postgres
#           host: localhost
#           port: 5432
#           user: webdb
#           password: webdb
#           name: webdb
#           max_connections: 25
#           max_idle_connections: 5
#           connection_max_lifetime: 1h
#           table_range: [0, 31]
#
#       tables:
#         - name: dm_users
#           suffix_count: 32
#         - name: dm_posts
#           suffix_count: 32
